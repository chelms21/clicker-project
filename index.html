<!doctype html>
<html lang="en">
  <head>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        overflow: hidden;
      }

      .big-part-yuh {
        width: 100%;
        min-height: 100vh;
        max-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.5em;
      }
    </style>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Nugget Clicker</title>
    <link rel="icon" type="image/x-icon" href="/img/mcnugget.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  </head>
  <body>
    <div class="big-part-yuh text-center h-100 w-100 d-inline-block">
      <div class="row">
        <div class="big-part-yuh col text-bg-secondary border h-100 d-inline-block">
          1 of 3
        </div>
        <div id="middle_section" class="big-part-yuh col-6 text-bg-dark border h-100 d-inline-block">
          2 of 3 (wider)
          <img id="nugget" src="/img/1-1.png" class="img-fluid" style="--animate-duration:0.1s;">
        </div>
        <div class="big-part-yuh col text-bg-secondary border h-100 d-inline-block">
          3 of 3
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script>
      const animateCSS = (element, animation, prefix = 'animate__') =>
      new Promise((resolve, reject) => {
        const animationName = `${prefix}${animation}`;
        const node = document.querySelector(element);

        node.classList.add(`${prefix}animated`, animationName);
        
        function handleAnimationEnd(event) {
          event.stopPropagation();
          node.classList.remove(`${prefix}animated`, animationName);
          resolve('Animation ended');
        }

        node.addEventListener('animationend', handleAnimationEnd, {once: true});
      });

      let nugget_img = '/img/1-1.png';
      let nuggets = 0;
      let cpc = 1;
      let tier = 1;
      let level = 1;

      function update_nugget() {
        if (tier == 11) {
          nugget_img = '/img/final.png';
        } else {
          nugget_img = `${tier}-${level}.png`
        }
      }

      const nugget = document.getElementById('nugget');
      const middle_section = document.getElementById('middle_section');

      function handle_click() {
        nuggets = nuggets + cpc;
      };

      nugget.onclick = function(){
        handle_click();
        animateCSS('#nugget', 'pulse');
      }

      setInterval(update_nugget, 1000);
    </script>
  </body>
</html>
